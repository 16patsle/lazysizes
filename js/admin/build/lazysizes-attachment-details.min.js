!function(){"use strict";const t=_.template('\n<span class="setting lazysizes-blurhash">\n\t<span class="name">Lazysizes Blurhash</span>\n\t<span class="value" <%= !lazysizesBlurhash ? \'style="padding-top: 0;"\' : \'\' %>>\n\t\t<%if (!lazysizesBlurhash) {%>\n\t\t\t<span>\n\t\t\t\t<%= lazysizesStrings.notGenerated %>\n\t\t\t</span>\n\t\t\t<button type="button" class="button button-primary lazysizes-blurhash-generate" <%= lazysizesLoading ? \'disabled\' : \'\' %>><%= lazysizesStrings.generate %></button>\n\t\t<%} else {%>\n\t\t\t<div style="padding-bottom: 8px;">\n\t\t\t\t<%= lazysizesStrings.current + lazysizesBlurhash %>\n\t\t\t</div>\n\t\t\t<button type="button" class="button lazysizes-blurhash-delete" <%= lazysizesLoading ? \'disabled\' : \'\' %>><%= lazysizesStrings.delete %></button>\n\t\t<%}%>\n\t\t<span class="spinner <%= lazysizesLoading ? \'is-active\' : \'\' %>" style="padding-top: 0; float: none; min-width: 20px;"></span>\n\t\t<%if (lazysizesError) {%>\n\t\t\t<div>\n\t\t\t\t<%= lazysizesError %>\n\t\t\t</div>\n\t\t<%}%>\n\t</span>\n</span>\n<p class="description">\n\t<%= lazysizesStrings.description %>\n</p>\n');wp.media.view.Attachment.Details.TwoColumn=wp.media.view.Attachment.Details.TwoColumn.extend({initialize:function(){wp.media.view.Attachment.Details.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change",this.render)},events:{"click .setting.lazysizes-blurhash .button":function(t){let e="";if(t.target.classList.contains("lazysizes-blurhash-generate"))e="generate";else{if(!t.target.classList.contains("lazysizes-blurhash-delete"))return;e="delete"}this.model.set("lazysizesLoading",!0),function(t,e,s,i){jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"lazysizes_blurhash",nonce:s,mode:t,attachmentId:e},success:i,error:i})}(e,this.model.attributes.id,this.model.attributes.nonces.lazysizes[e],(t,s,i)=>{this.model.set("lazysizesLoading",!1),"error"===s?this.model.set("lazysizesError",`${lazysizesStrings.error} (${i})`):t.success?"generate"===e?this.model.set("lazysizesBlurhash",t.blurhash):"delete"===e&&this.model.set("lazysizesBlurhash",!1):this.model.set("lazysizesError",t.data[0].message)})}},render:function(){return wp.media.view.Attachment.prototype.render.apply(this,arguments),!1===this.model.changedAttributes(["lazysizesBlurhash","lazysizesError"])&&this.model.fetch(),this.views.detach(),"image"===this.model.attributes.type&&this.$el.find(".settings").append(t(this.model.toJSON())),this.views.render(),this}}),wp.media.view.Attachment.Details=wp.media.view.Attachment.Details.extend({initialize:function(){this.listenTo(this.model,"change",this.render)},render:function(){return wp.media.view.Attachment.prototype.render.apply(this,arguments),this.model.fetch(),this.views.detach(),this.$el.append(t(this.model.toJSON())),this.views.render(),this}})}();
