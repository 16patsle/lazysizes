"use strict";!function(e,t){var i=function(){t(e.lazySizes),e.removeEventListener("lazyunveilread",i,!0)};t=t.bind(null,e,e.document),"object"==typeof module&&module.exports?t(require("lazysizes")):"function"==typeof define&&define.amd?define(["lazysizes"],t):e.lazySizes?i():e.addEventListener("lazyunveilread",i,!0)}(window,(function(e,t,i){if(e.addEventListener){var a,n,o,r,s,d=Array.prototype.forEach,c=/^picture$/i,u="data-aspectratio",f="img[data-aspectratio]",l=function(t){return e.matchMedia?(l=function(e){return!e||(matchMedia(e)||{}).matches})(t):e.Modernizr&&Modernizr.mq?!t||Modernizr.mq(t):!t},m=i.aC,h=i.rC,p=i.cfg;g.prototype={_setupEvents:function(){var e,i,a=this,n=function(e){e.naturalWidth<36?a.addAspectRatio(e,!0):a.removeAspectRatio(e,!0)},o=function(){a.processImages()};t.addEventListener("load",(function(e){e.target.getAttribute&&e.target.getAttribute(u)&&n(e.target)}),!0),addEventListener("resize",(i=function(){d.call(a.ratioElems,n)},function(){clearTimeout(e),e=setTimeout(i,99)})),t.addEventListener("DOMContentLoaded",o),addEventListener("load",o)},processImages:function(e){var i,a;e||(e=t),i="length"in e&&!e.nodeName?e:e.querySelectorAll(f);for(a=0;a<i.length;a++)i[a].naturalWidth>36?this.removeAspectRatio(i[a]):this.addAspectRatio(i[a])},getSelectedRatio:function(e){var t,i,a,n,o,r=e.parentNode;if(r&&c.test(r.nodeName||""))for(t=0,i=(a=r.getElementsByTagName("source")).length;t<i;t++)if(n=a[t].getAttribute("data-media")||a[t].getAttribute("media"),p.customMedia[n]&&(n=p.customMedia[n]),l(n)){o=a[t].getAttribute(u);break}return o||e.getAttribute(u)||""},parseRatio:(r=/^\s*([+\d\.]+)(\s*[\/x]\s*([+\d\.]+))?\s*$/,s={},function(e){var t;return!s[e]&&(t=e.match(r))&&(t[3]?s[e]=t[1]/t[3]:s[e]=1*t[1]),s[e]}),addAspectRatio:function(t,i){var a,n=t.offsetWidth,o=t.offsetHeight;i||m(t,"lazyaspectratio"),n<36&&o<=0?(n||o&&e.console)&&console.log("Define width or height of image, so we can calculate the other dimension"):(a=this.getSelectedRatio(t),(a=this.parseRatio(a))&&(n?t.style.height=n/a+"px":t.style.width=o*a+"px"))},removeAspectRatio:function(e){h(e,"lazyaspectratio"),e.style.height="",e.style.width="",e.removeAttribute(u)}},(n=function(){(o=e.jQuery||e.Zepto||e.shoestring||e.$)&&o.fn&&!o.fn.imageRatio&&o.fn.filter&&o.fn.add&&o.fn.find?o.fn.imageRatio=function(){return a.processImages(this.find(f).add(this.filter(f))),this}:o=!1})(),setTimeout(n),a=new g,e.imageRatio=a,"object"==typeof module&&module.exports?module.exports=a:"function"==typeof define&&define.amd&&define(a)}function g(){this.ratioElems=t.getElementsByClassName("lazyaspectratio"),this._setupEvents(),this.processImages()}}));
